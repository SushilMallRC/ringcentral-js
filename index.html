<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@ringcentral/sdk</title><meta name="description" content="Documentation for @ringcentral/sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@ringcentral/sdk</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@ringcentral/sdk</h2></div><div class="tsd-panel tsd-typography"><a id="md:table-of-contents" class="tsd-anchor"></a><h1><a href="#md:table-of-contents">Table of contents</a></h1><ul>
<li><a href="#md:installation">Installation</a></li>
<li><a href="#md:getting-started">Getting Started</a></li>
<li><a href="#md:api-calls">API Calls</a></li>
<li><a href="#md:advanced-sdk-configuration--polyfills">Advanced SDK Configuration &amp; Polyfills</a></li>
<li><a href="#md:making-telephony-calls">Making telephony calls</a></li>
<li><a href="#md:call-management-using-javascript">Call management using JavaScript</a></li>
<li><a href="#md:sms">SMS</a></li>
<li><a href="#md:mms">MMS</a></li>
<li><a href="#md:fax">Fax</a></li>
<li><a href="#md:page-visibility">Page visibility</a></li>
<li><a href="#md:tracking-network-requests-and-responses">Tracking network Requests And Responses</a></li>
</ul>
<hr>
<a id="md:installation" class="tsd-anchor"></a><h1><a href="#md:installation">Installation</a></h1><p>You will need to configure SDK instance with your unique application key &amp; secret this is provided by RingCentral&#39;s
developer relations team.</p>
<p>This instance will be used later on to perform calls to API.</p>
<p>You can also supply optional polyfills and dependency injections, please read the <a href="#md:advanced-sdk-configuration--polyfills">polyfills</a>
section of this readme.</p>
<p>SDK can be used in 3 environments:</p>
<ol>
<li><a href="#md:set-things-up-in-nodejs">NodeJS</a></li>
<li><a href="#md:set-things-up-for-browserify-or-webpack">Browserify or Webpack</a></li>
<li><a href="#md:set-things-up-in-browser">Browser</a></li>
</ol>
<a id="md:set-things-up-in-nodejs" class="tsd-anchor"></a><h2><a href="#md:set-things-up-in-nodejs">Set things up in NodeJS</a></h2><ol>
<li><p>Install the NPM package:</p>
<pre><code class="language-sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@ringcentral/sdk</span><span class="hl-1"> </span><span class="hl-3">--save</span>
</code><button>Copy</button></pre>
</li>
<li><p>Require the SDK:</p>
<pre><code class="language-js"><span class="hl-4">import</span><span class="hl-1"> {</span><span class="hl-5">SDK</span><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ringcentral/sdk&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">// op</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">SDK</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;@ringcentral/sdk&#39;</span><span class="hl-1">).</span><span class="hl-7">SDK</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">rcsdk</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">server:</span><span class="hl-1"> </span><span class="hl-7">SDK</span><span class="hl-1">.</span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">production</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientId:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientId&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientSecret&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">redirectUri:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">// optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
</li>
</ol>
<a id="md:set-things-up-for-browserify-or-webpack" class="tsd-anchor"></a><h2><a href="#md:set-things-up-for-browserify-or-webpack">Set things up for Browserify or Webpack</a></h2><p>Follow installation steps for NodeJS. Don&#39;t forget to add <code>target: &#39;web&#39;</code> to your <code>webpack.config.js</code> to tell Webpack.</p>
<a id="md:set-things-up-in-browser" class="tsd-anchor"></a><h2><a href="#md:set-things-up-in-browser">Set things up in Browser</a></h2><a id="md:get-the-code" class="tsd-anchor"></a><h3><a href="#md:get-the-code">Get the code</a></h3><p>Pick the option that works best for you:</p>
<ul>
<li><p>Use CDN <strong>Attention! Versions listed here may be outdated</strong>:</p>
<ul>
<li><a href="https://unpkg.com/@ringcentral/sdk@latest/dist/ringcentral.js">https://unpkg.com/@ringcentral/sdk@latest/dist/ringcentral.js</a></li>
<li><a href="https://unpkg.com/whatwg-fetch@latest/dist/fetch.umd.js">https://unpkg.com/whatwg-fetch@latest/dist/fetch.umd.js</a></li>
<li><a href="https://unpkg.com/es6-promise@latest/dist/es6-promise.auto.js">https://unpkg.com/es6-promise@latest/dist/es6-promise.auto.js</a></li>
</ul>
</li>
<li><p>Download everything manually:</p>
<ul>
<li><a href="https://github.com/ringcentral/ringcentral-js/releases/download/latest">SDK</a></li>
<li><a href="https://github.com/github/fetch/releases/download/latest">Fetch</a></li>
<li><a href="https://github.com/jakearchibald/es6-promise/releases/latest">ES6 Promise</a></li>
</ul>
</li>
</ul>
<a id="md:add-scripts-to-html-page-if-you-are-not-using-any-module-loaders" class="tsd-anchor"></a><h3><a href="#md:add-scripts-to-html-page-if-you-are-not-using-any-module-loaders">Add scripts to HTML page (if you are not using any module loaders)</a></h3><p>The SDK is represented by the global RingCentral constructor. Your application must create an instance of this object:</p>
<p>Add the following to your HTML:</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">type</span><span class="hl-10">=</span><span class="hl-12">&quot;text/javascript&quot;</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-10">=</span><span class="hl-12">&quot;path-to-scripts/promise.auto.js&quot;</span><span class="hl-8">&gt;&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">type</span><span class="hl-10">=</span><span class="hl-12">&quot;text/javascript&quot;</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-10">=</span><span class="hl-12">&quot;path-to-scripts/fetch.umd.js&quot;</span><span class="hl-8">&gt;&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">type</span><span class="hl-10">=</span><span class="hl-12">&quot;text/javascript&quot;</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-10">=</span><span class="hl-12">&quot;path-to-scripts/ringcentral.js&quot;</span><span class="hl-8">&gt;&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><span class="hl-6">&lt;!-- or ringcentral.min.js --&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">type</span><span class="hl-10">=</span><span class="hl-12">&quot;text/javascript&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-10">    </span><span class="hl-3">var</span><span class="hl-10"> </span><span class="hl-5">rcsdk</span><span class="hl-10"> </span><span class="hl-1">=</span><span class="hl-10"> </span><span class="hl-3">new</span><span class="hl-10"> </span><span class="hl-5">RingCentral</span><span class="hl-10">.</span><span class="hl-0">SDK</span><span class="hl-10">({</span><br/><span class="hl-10">        </span><span class="hl-5">server:</span><span class="hl-10"> </span><span class="hl-5">RingCentral</span><span class="hl-10">.</span><span class="hl-7">SDK</span><span class="hl-10">.</span><span class="hl-5">server</span><span class="hl-10">.</span><span class="hl-5">production</span><span class="hl-10">,</span><br/><span class="hl-10">        </span><span class="hl-5">clientId:</span><span class="hl-10"> </span><span class="hl-2">&#39;yourClientId&#39;</span><span class="hl-10">,</span><br/><span class="hl-10">        </span><span class="hl-5">clientSecret:</span><span class="hl-10"> </span><span class="hl-2">&#39;yourClientSecret&#39;</span><span class="hl-10">,</span><br/><span class="hl-10">        </span><span class="hl-5">redirectUri:</span><span class="hl-10"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-10">, </span><span class="hl-6">// optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)</span><br/><span class="hl-10">    });</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:if-you-use-requirejs-in-your-project" class="tsd-anchor"></a><h3><a href="#md:if-you-use-requirejs-in-your-project">If you use RequireJS in your project</a></h3><pre><code class="language-js"><span class="hl-6">// Add this to your RequireJS configuration file</span><br/><span class="hl-5">require</span><span class="hl-1">.</span><span class="hl-0">config</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">paths:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">ringcentral:</span><span class="hl-1"> </span><span class="hl-2">&#39;path-to-scripts/ringcentral&#39;</span><span class="hl-1">, </span><span class="hl-6">// or ringcentral.min</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// Then you can use the SDK like any other AMD component</span><br/><span class="hl-0">require</span><span class="hl-1">([</span><span class="hl-2">&#39;ringcentral&#39;</span><span class="hl-1">], </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-6">/** </span><span class="hl-3">@type</span><span class="hl-6"> RingCentral.sdk */</span><span class="hl-1"> </span><span class="hl-5">ns</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">rcsdk</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">ns</span><span class="hl-1">.</span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">server:</span><span class="hl-1"> </span><span class="hl-5">ns</span><span class="hl-1">.</span><span class="hl-7">SDK</span><span class="hl-1">.</span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">production</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">clientId:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientId&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">clientSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientSecret&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">redirectUri:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">// optional, but is required for Implicit Grant and Authorization Code OAuth Flows (see below)</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>Make sure that <a href="#md:advanced-sdk-configuration--polyfills">polyfills</a> are added to the page before or together with the SDK.
Make sure SDK is <a href="#md:advanced-sdk-configuration--polyfills">configured</a> to use polyfills.</p>
<hr>
<a id="md:getting-started" class="tsd-anchor"></a><h1><a href="#md:getting-started">Getting Started</a></h1><p>Read <a href="API.md">API documentation</a> for more information.</p>
<a id="md:login" class="tsd-anchor"></a><h2><a href="#md:login">Login</a></h2><p>Login is accomplished by calling the <code>rcsdk.login()</code> method of the Platform object with certain parameters depending
on the type of auth flow. A <code>Promise</code> instance is returned, resolved with an AJAX <code>Response</code> object.</p>
<a id="md:3-legged-oauth-20-flows" class="tsd-anchor"></a><h3><a href="#md:3-legged-oauth-20-flows">3-legged OAuth 2.0 Flows</a></h3><p>SDK provides a set of helper functions to assist with 3-legged OAuth flow.</p>
<p>You can pick one of two available setups:</p>
<ol>
<li>Top Frame &mdash; user temporarily navigates away from the app to RingCentral login pages</li>
<li>Popup &mdash; RingCentral login pages are opened in a popup</li>
</ol>
<p>Both setups support Authorization Code and Implicit Grant flows.</p>
<a id="md:top-frame-setup" class="tsd-anchor"></a><h4><a href="#md:top-frame-setup">Top Frame Setup</a></h4><p>This setup is good when your app uses the entire browser window.</p>
<p>When login is required for your application, the app&#39;s login page needs to open a URL that can be generated by SDK:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">loginUrl</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">loginUrl</span><span class="hl-1">({</span><span class="hl-5">implicit:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">}); </span><span class="hl-6">// implicit parameter is optional, default false</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-0">assign</span><span class="hl-1">(</span><span class="hl-5">loginUrl</span><span class="hl-1">); </span><span class="hl-6">// or .replace()</span>
</code><button>Copy</button></pre>
<p>Your application need to have a special landing page to handle OAuth Redirect URI. On this page you need to resume
the flow:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">loginOptions</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">parseLoginRedirect</span><span class="hl-1">(</span><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-5">hash</span><span class="hl-1"> || </span><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-5">search</span><span class="hl-1">);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-5">loginOptions</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(...);</span>
</code><button>Copy</button></pre>
<p>The above mentioned flow assumes that login page will be rendered in the top frame, e.g. user will temporarily navigate
away from the app to RingCentral login pages.</p>
<a id="md:top-frame-with-pkce-setup" class="tsd-anchor"></a><h4><a href="#md:top-frame-with-pkce-setup">Top Frame with PKCE Setup</a></h4><p>When enabling PKCE with top frame, you will have to manually save the codeVerifier and pass it to the redirect page</p>
<p>One way of doing this is using the localStorage</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">loginUrl</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">loginUrl</span><span class="hl-1">({</span><span class="hl-5">usePKCE:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">, </span><span class="hl-5">implicit:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">});</span><br/><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">codeVerifier</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">platform</span><span class="hl-1">().</span><span class="hl-5">codeVerifier</span><span class="hl-1">;</span><br/><span class="hl-5">localStorage</span><span class="hl-1">.</span><span class="hl-0">setItem</span><span class="hl-1">(</span><span class="hl-2">&#39;codeVerifier&#39;</span><span class="hl-1">, </span><span class="hl-5">codeVerifier</span><span class="hl-1">);</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-0">assign</span><span class="hl-1">(</span><span class="hl-5">loginUrl</span><span class="hl-1">); </span><span class="hl-6">// or .replace()</span>
</code><button>Copy</button></pre>
<p>Then in your redirect landing page, use this code verifier before calling the login method</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">loginOptions</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">parseLoginRedirect</span><span class="hl-1">(</span><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-5">hash</span><span class="hl-1"> || </span><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">location</span><span class="hl-1">.</span><span class="hl-5">search</span><span class="hl-1">);</span><br/><span class="hl-5">loginOptions</span><span class="hl-1">[</span><span class="hl-2">&#39;code_verifier&#39;</span><span class="hl-1">] = </span><span class="hl-5">localStorage</span><span class="hl-1">.</span><span class="hl-0">getItem</span><span class="hl-1">(</span><span class="hl-2">&#39;codeVerifier&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-5">loginOptions</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(...);</span>
</code><button>Copy</button></pre>
<a id="md:popup-setup" class="tsd-anchor"></a><h4><a href="#md:popup-setup">Popup Setup</a></h4><p>This setup is good when your app is rendered as a widget on a third-party sites.</p>
<p>If you would like to simply open RingCentral login pages in a popup, you may use the following short-hand in your app&#39;s
login page:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">loginUrl</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">loginUrl</span><span class="hl-1">({</span><span class="hl-5">implicit:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">}); </span><span class="hl-6">// implicit parameter is optional, default false</span><br/><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">loginWindow</span><span class="hl-1">({</span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-5">loginUrl</span><span class="hl-1">}) </span><span class="hl-6">// this method also allows to supply more options to control window position</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">loginOptions</span><span class="hl-1">){</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-5">loginOptions</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(...)</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(...);</span>
</code><button>Copy</button></pre>
<p>In this case your landing page (the one to which Redirect URI points) need to call the following code:</p>
<pre><code class="language-js"><span class="hl-5">RingCentral</span><span class="hl-1">.</span><span class="hl-7">SDK</span><span class="hl-1">.</span><span class="hl-0">handleLoginRedirect</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<a id="md:difference-between-authorization-code-and-implicit-grant-flows" class="tsd-anchor"></a><h4><a href="#md:difference-between-authorization-code-and-implicit-grant-flows">Difference between Authorization Code and Implicit Grant flows</a></h4><p>If your app uses Implicit Grant you should not provide <code>clientSecret</code> when creating SDK instance. The resulting login
information will not have <code>refresh_token</code>, which means that every time when <code>access_token</code> expires, app should navigate
users to app login page and re-initiate login flow. Also your app will need to handle situations with <code>refreshError</code>
events properly, for instance, enter auth flow automatically without user intervention.</p>
<p>For dynamic apps with subscriptions Authorization Code should work better because it provides an ability to refresh
tokens automatically without affecting the state of the app, but it requires to expose <code>clientSecret</code>.</p>
<a id="md:password-flow" class="tsd-anchor"></a><h3><a href="#md:password-flow">Password Flow</a></h3><p>This flow to be used only for private backend apps that can protect user credentials. Client-side apps are not allowed
to use this flow.</p>
<p>Login is accomplished by calling the <code>rcsdk.login()</code> method of the Platform object with username, extension
(optional), and password as parameters.</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">login</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">username:</span><span class="hl-1"> </span><span class="hl-2">&#39;18001234567&#39;</span><span class="hl-1">, </span><span class="hl-6">// phone number in full format</span><br/><span class="hl-1">        </span><span class="hl-5">extension:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">// leave blank if direct number is used</span><br/><span class="hl-1">        </span><span class="hl-5">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourpassword&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">// your code here</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1"> || </span><span class="hl-2">&#39;Server cannot authorize user&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<a id="md:multi-user-login" class="tsd-anchor"></a><h3><a href="#md:multi-user-login">Multi User Login</a></h3><p>If you need to have multiple users login in to different instances of the sdk, you can use the <code>cachePrefix</code> SDK option. Specify different <code>cachePrefix</code> values for each instance.</p>
<pre><code class="language-js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">rcsdk1</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">RingCentral</span><span class="hl-1">.</span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">server:</span><span class="hl-1"> </span><span class="hl-5">RingCentral</span><span class="hl-1">.</span><span class="hl-7">SDK</span><span class="hl-1">.</span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">production</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientId:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientId&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientSecret&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">cachePrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;user1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">rcsdk1</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">username:</span><span class="hl-1"> </span><span class="hl-2">&#39;18001234567&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">extension:</span><span class="hl-1"> </span><span class="hl-2">&#39;101&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;password1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">rcsdk2</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">RingCentral</span><span class="hl-1">.</span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">server:</span><span class="hl-1"> </span><span class="hl-5">RingCentral</span><span class="hl-1">.</span><span class="hl-7">SDK</span><span class="hl-1">.</span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">production</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientId:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientId&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">clientSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;yourClientSecret&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">cachePrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;user2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">rcsdk1</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">username:</span><span class="hl-1"> </span><span class="hl-2">&#39;18005557777&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">extension:</span><span class="hl-1"> </span><span class="hl-2">&#39;102&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;password2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>This prevents login state from being shared between the two instances <code>rcsdk1</code> and <code>rcsdk2</code></p>
<a id="md:handling-login-success" class="tsd-anchor"></a><h2><a href="#md:handling-login-success">Handling login success</a></h2><p>Because the login process is asynchronous, you need to call the promise&#39;s <code>then</code> method and pass your success handler as
the continuation function.</p>
<p>This function will be called once login has succeeded, which allows the application to then perform updates to
the user interface, and then perform the next actions using the API to load account details for the user&#39;s account
and such.</p>
<a id="md:handling-login-failure" class="tsd-anchor"></a><h2><a href="#md:handling-login-failure">Handling login failure</a></h2><p>Login can, of course, fail - a user can enter the incorrect password or mistype their user name.</p>
<p>To handle cases where login fails, you can provide an error handler function in a call to the Promise&#39;s <code>catch</code> method.
To keep this example simple, a simple JavaScript alert is being used. In a real application, you will want to provide
a good UX in your login form UI.</p>
<a id="md:checking-login-state" class="tsd-anchor"></a><h2><a href="#md:checking-login-state">Checking login state</a></h2><p>To check in your Application if the user is authenticated, you can call the <code>loggedIn</code> method of the SDK:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">loggedIn</span><span class="hl-1">().</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(</span><span class="hl-5">status</span><span class="hl-1">){ </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">status</span><span class="hl-1">) { ... } </span><span class="hl-4">else</span><span class="hl-1"> { ... } });</span>
</code><button>Copy</button></pre>
<p>Or you can call <code>ensureLoggedIn</code> method which works the same way as <code>loggedIn</code> but rejects promise on failure:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">ensureLoggedIn</span><span class="hl-1">().</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(){ ... }).</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(){ ... });</span>
</code><button>Copy</button></pre>
<p>The SDK takes care of the token lifecycle. It will refresh tokens for you automatically. It will also automatically
pause and queue all new API requests while the token is being refreshed in order to prevent data loss or inconsistency
between SDK instances in different tabs. Paused / queued API requests will then be automatically processed once the
token has been refreshed. All apropriate events will be emitted during this process.</p>
<p>If you just need to check whether the user has a valid token, you can call the <code>accessTokenValid</code> method:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">platform</span><span class="hl-1">().</span><span class="hl-0">auth</span><span class="hl-1">().</span><span class="hl-0">accessTokenValid</span><span class="hl-1">(); </span><span class="hl-6">// returns Promise&lt;boolean&gt;</span>
</code><button>Copy</button></pre>
<a id="md:retrieving-and-setting-auth-information" class="tsd-anchor"></a><h2><a href="#md:retrieving-and-setting-auth-information">Retrieving and setting auth information</a></h2><p>You can retrieve save and set back the auth information:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">authData</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">platform</span><span class="hl-1">().</span><span class="hl-0">auth</span><span class="hl-1">().</span><span class="hl-0">data</span><span class="hl-1">();</span><br/><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">platform</span><span class="hl-1">().</span><span class="hl-0">auth</span><span class="hl-1">().</span><span class="hl-0">setData</span><span class="hl-1">(</span><span class="hl-5">authData</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>It can be useful on the server if SDK instances are created and disposed for every HTTP request.</p>
<a id="md:logout" class="tsd-anchor"></a><h2><a href="#md:logout">Logout</a></h2><p>Logging the user out is trivial - just call the <code>logout</code> method on the SDK:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">logout</span><span class="hl-1">().</span><span class="hl-0">then</span><span class="hl-1">(...).</span><span class="hl-0">catch</span><span class="hl-1">(...);</span>
</code><button>Copy</button></pre>
<a id="md:events" class="tsd-anchor"></a><h2><a href="#md:events">Events</a></h2><p>The platform provides the following events:</p>
<ul>
<li><code>loginSuccess</code></li>
<li><code>loginError</code></li>
<li><code>logoutSuccess</code></li>
<li><code>logoutError</code></li>
<li><code>refreshSuccess</code></li>
<li><code>refreshError</code> &mdash; application may listen to this error and show login page</li>
<li><code>rateLimitError</code></li>
</ul>
<p>To listen on platform events, you should call the <code>on</code> method of the platform object:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">platform</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">platform</span><span class="hl-1">();</span><br/><br/><span class="hl-5">platform</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-5">platform</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">refreshError</span><span class="hl-1">, </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">// do something, usually open a login page</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>The <code>on</code> method accepts an event type as its first argument and a handler function as its second argument.</p>
<a id="md:api-calls" class="tsd-anchor"></a><h1><a href="#md:api-calls">API calls</a></h1><p>To perform an authenticated API call, you should use the one of the methods of the platform object:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">send</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">method:</span><span class="hl-1"> </span><span class="hl-2">&#39;PUT&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">query:</span><span class="hl-1"> {...},</span><br/><span class="hl-1">        </span><span class="hl-5">headers:</span><span class="hl-1"> {...},</span><br/><span class="hl-1">        </span><span class="hl-5">body:</span><span class="hl-1"> {...}</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(</span><span class="hl-5">apiResponse</span><span class="hl-1">){</span><br/><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">apiResponse</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(</span><span class="hl-5">json</span><span class="hl-1">){</span><br/><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-5">json</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">){</span><br/><br/><span class="hl-1">        </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">response</span><span class="hl-1"> || </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">request</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">            </span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">request</span><span class="hl-1"> = </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">request</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1"> = </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">response</span><span class="hl-1">;</span><br/><br/><span class="hl-1">            </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;API error &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1"> + </span><span class="hl-2">&#39; for URL&#39;</span><span class="hl-1"> + </span><span class="hl-5">request</span><span class="hl-1">.</span><span class="hl-5">url</span><span class="hl-1"> + </span><span class="hl-2">&#39; &#39;</span><span class="hl-1"> + </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-5">response</span><span class="hl-1">));</span><br/><br/><span class="hl-1">        } </span><span class="hl-4">else</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">            </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">    });</span><br/>
</code><button>Copy</button></pre>
<p>If your <code>Promise</code> library supports global error handler it might be useful to log Requests and Responses there.</p>
<a id="md:http-verb-shorthands" class="tsd-anchor"></a><h2><a href="#md:http-verb-shorthands">HTTP Verb shorthands</a></h2><pre><code class="language-js"><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">, {...</span><span class="hl-5">query</span><span class="hl-1">}).</span><span class="hl-0">then</span><span class="hl-1">(...);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">, {...</span><span class="hl-5">body</span><span class="hl-1">}, {...</span><span class="hl-5">query</span><span class="hl-1">}).</span><span class="hl-0">then</span><span class="hl-1">(...);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">put</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">, {...</span><span class="hl-5">body</span><span class="hl-1">}, {...</span><span class="hl-5">query</span><span class="hl-1">}).</span><span class="hl-0">then</span><span class="hl-1">(...);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">, {...</span><span class="hl-5">body</span><span class="hl-1">}, {...</span><span class="hl-5">query</span><span class="hl-1">}).</span><span class="hl-0">then</span><span class="hl-1">(...);</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~&#39;</span><span class="hl-1">, {...</span><span class="hl-5">query</span><span class="hl-1">}).</span><span class="hl-0">then</span><span class="hl-1">(...);</span>
</code><button>Copy</button></pre>
<a id="md:available-api-response-methods" class="tsd-anchor"></a><h2><a href="#md:available-api-response-methods">Available API response methods</a></h2><ul>
<li><code>json()</code> &mdash; if response type is JSON returns a plain JS object</li>
<li><code>text()</code> &mdash; returns text representation</li>
<li><code>multipart()</code> &mdash; for <code>Content-Type: multipart/mixed</code> responses returns an array of <code>ApiResponse</code></li>
<li><code>toMultipart()</code> &mdash; same as <code>multipart()</code> but when response is not <code>Content-Type: multipart/mixed</code> it will return an array with one item instead of error</li>
<li><code>ok()</code> &mdash; <code>true</code> for all <code>2xx</code> responses, <code>false</code> otherwise</li>
<li><code>error()</code> &mdash; error string if any</li>
<li><code>request()</code> &mdash; low-level <code>Request</code> object</li>
<li><code>response()</code> &mdash; low-level <code>Response</code> object</li>
</ul>
<a id="md:binary-downloads" class="tsd-anchor"></a><h2><a href="#md:binary-downloads">Binary downloads</a></h2><p>If you need to download a binary file from API (call recording, fax attachment), you can do it as follows:</p>
<a id="md:on-nodejs" class="tsd-anchor"></a><h3><a href="#md:on-nodejs">On NodeJS</a></h3><pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">fs</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;fs&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// read as buffer</span><br/><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/messages/foo/content&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">res</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">res</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">().</span><span class="hl-0">buffer</span><span class="hl-1">(); </span><span class="hl-6">// we are accessing Node Fetch&#39;s Response</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">buffer</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;./octocat.png&#39;</span><span class="hl-1">, </span><span class="hl-5">buffer</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-6">// read as stream</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/messages/foo/content&#39;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">res</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">res</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">().</span><span class="hl-5">body</span><span class="hl-1">.</span><span class="hl-0">pipe</span><span class="hl-1">(</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-0">createWriteStream</span><span class="hl-1">(</span><span class="hl-2">&#39;./octocat.png&#39;</span><span class="hl-1">)); </span><span class="hl-6">// we are accessing Node Fetch&#39;s Response</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>See more here <a href="https://github.com/bitinn/node-fetch#usage">https://github.com/bitinn/node-fetch#usage</a>.</p>
<a id="md:in-browser" class="tsd-anchor"></a><h3><a href="#md:in-browser">In browser</a></h3><pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/messages/foo/content&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">res</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">res</span><span class="hl-1">.</span><span class="hl-0">response</span><span class="hl-1">().</span><span class="hl-0">blob</span><span class="hl-1">(); </span><span class="hl-6">// or arrayBuffer(), we are accessing WhatWG Fetch&#39;s Response</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">blob</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">img</span><span class="hl-1"> = </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">createElement</span><span class="hl-1">(</span><span class="hl-2">&#39;img&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-5">img</span><span class="hl-1">.</span><span class="hl-5">src</span><span class="hl-1"> = </span><span class="hl-7">URL</span><span class="hl-1">.</span><span class="hl-0">createObjectURL</span><span class="hl-1">(</span><span class="hl-5">blob</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;container&#39;</span><span class="hl-1">).</span><span class="hl-0">appendChild</span><span class="hl-1">(</span><span class="hl-5">img</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>See more here <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">https://developer.mozilla.org/en-US/docs/Web/API/Response</a>.</p>
<a id="md:generic" class="tsd-anchor"></a><h3><a href="#md:generic">Generic</a></h3><p>In any case you always can just add token to known URL of resource and download it using whatever library you want or
use directly as <code>&lt;img src=&quot;...&quot;/&gt;</code>:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">url</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">signUrl</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/messages/foo/content&#39;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:rate-limiting" class="tsd-anchor"></a><h2><a href="#md:rate-limiting">Rate Limiting</a></h2><p>Platform class emits <code>rateLimitError</code> if server returns <code>429</code> status. You may supply an option <code>handleRateLimit</code> and
SDK will re-execute the failed request. Please keep in mind that your application should somehow delay/throttle other
subsequent requests in this case because otherwise all those requests will be postponed too.</p>
<a id="md:advanced-sdk-configuration-amp-polyfills" class="tsd-anchor"></a><h1><a href="#md:advanced-sdk-configuration-amp-polyfills">Advanced SDK Configuration &amp; Polyfills</a></h1><p>You can use any of your favourite <code>fetch()</code> and <code>Promise</code> polyfills. SDK tries to get them from global scope every
time new instance is created.</p>
<p>In rare case when SDK will not detect globals automatically you can set them as follows:</p>
<pre><code class="language-js"><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">Promise</span><span class="hl-1"> = </span><span class="hl-5">whatever</span><span class="hl-1">;</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">fetch</span><span class="hl-1"> = </span><span class="hl-5">whatever</span><span class="hl-1">;</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">Headers</span><span class="hl-1"> = </span><span class="hl-5">whatever</span><span class="hl-1">;</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">Request</span><span class="hl-1"> = </span><span class="hl-5">whatever</span><span class="hl-1">;</span><br/><span class="hl-5">window</span><span class="hl-1">.</span><span class="hl-5">Response</span><span class="hl-1"> = </span><span class="hl-5">whatever</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<p>Also you can manually define SDK properties:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">rcsdk</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">localStorage:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">PUBNUB:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Promise:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">fetch:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Headers:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Request:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Response:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>But taking into account the nature of polyfills, it&#39;s better to keep them global as described before.</p>
<p>In the NodeJS it might be useful to replace simple built-in storage with something persistent:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">sdk</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">localStorage:</span><span class="hl-1"> </span><span class="hl-5">whatever</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>SDK works with <code>localStorage</code> as with a simple object.</p>
<p>If you need to use 2 or more RingCentral accounts simultaneously, you need to create an instance of SDK for each account
and provide some unique <code>cachePrefix</code> to SDK constructor (otherwise instances will share authentication).</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">rcsdk1</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">cachePrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;foo-&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">rcsdk2</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">SDK</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">cachePrefix:</span><span class="hl-1"> </span><span class="hl-2">&#39;bar-&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<hr>
<a id="md:making-telephony-calls" class="tsd-anchor"></a><h1><a href="#md:making-telephony-calls">Making telephony calls</a></h1><p>In RingCentral terminology, making telephony calls is named &quot;RingOut&quot;.</p>
<p>This example demonstrates a way to create a flexible RingOut tracking procedure. This is the most complex example with
maximum fine-tuning - it could be simplified to suit the business requirements.</p>
<p>The sequence of RingOut is as follows:</p>
<ol>
<li>Perform a POST with the RingOut data</li>
<li>Poll the RingOut status (GET requests) every second or so</li>
</ol>
<p>Please refer to the following example:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">timeout</span><span class="hl-1"> = </span><span class="hl-3">null</span><span class="hl-1">; </span><span class="hl-6">// reference to timeout object</span><br/><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">ringout</span><span class="hl-1"> = {}; </span><span class="hl-6">// this is the status object (lowercase)</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">{Error}</span><span class="hl-6"> </span><span class="hl-5">e</span><br/><span class="hl-6"> */</span><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">handleError</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-5">unsavedRingout</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">rcsdk</span><br/><span class="hl-1">        .</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/ringout&#39;</span><span class="hl-1">, </span><span class="hl-5">unsavedRingout</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">ringout</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">&#39;First status:&#39;</span><span class="hl-1">, </span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1">.</span><span class="hl-5">callStatus</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">update</span><span class="hl-1">();</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-5">handleError</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">{function(number?)}</span><span class="hl-6"> </span><span class="hl-5">next</span><span class="hl-6"> - callback that will be used to continue polling</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">{number}</span><span class="hl-6"> </span><span class="hl-5">delay</span><span class="hl-6"> - last used delay</span><br/><span class="hl-6"> */</span><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">update</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">clearTimeout</span><span class="hl-1">(</span><span class="hl-5">timeout</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-0">setTimeout</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1">.</span><span class="hl-5">callStatus</span><span class="hl-1"> !== </span><span class="hl-2">&#39;InProgress&#39;</span><span class="hl-1">) </span><span class="hl-4">return</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-5">rcsdk</span><br/><span class="hl-1">            .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">uri</span><span class="hl-1">)</span><br/><span class="hl-1">            .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">            })</span><br/><span class="hl-1">            .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">ringout</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">&#39;Current status:&#39;</span><span class="hl-1">, </span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1">.</span><span class="hl-5">callStatus</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-0">update</span><span class="hl-1">();</span><br/><span class="hl-1">            })</span><br/><span class="hl-1">            .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-5">handleError</span><span class="hl-1">);</span><br/><span class="hl-1">    }, </span><span class="hl-14">500</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * To stop polling, call this at any time</span><br/><span class="hl-6"> */</span><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">hangUp</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">clearTimeout</span><span class="hl-1">(</span><span class="hl-5">timeout</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">status</span><span class="hl-1">.</span><span class="hl-5">callStatus</span><span class="hl-1"> !== </span><span class="hl-2">&#39;InProgress&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-5">ringout</span><span class="hl-1">.</span><span class="hl-5">uri</span><span class="hl-1">).</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-5">handleError</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Clean</span><br/><span class="hl-1">    </span><span class="hl-5">ringout</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-5">from:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">},</span><br/><span class="hl-1">        </span><span class="hl-5">to:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">},</span><br/><span class="hl-1">        </span><span class="hl-5">callerId:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">}, </span><span class="hl-6">// optional,</span><br/><span class="hl-1">        </span><span class="hl-5">playPrompt:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">, </span><span class="hl-6">// optional</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Start the ringout procedure (may be called multiple times with different settings)</span><br/><span class="hl-6"> */</span><br/><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">from:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;16501111111&#39;</span><span class="hl-1">},</span><br/><span class="hl-1">    </span><span class="hl-5">to:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;18882222222&#39;</span><span class="hl-1">},</span><br/><span class="hl-1">    </span><span class="hl-5">callerId:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;18882222222&#39;</span><span class="hl-1">}, </span><span class="hl-6">// optional,</span><br/><span class="hl-1">    </span><span class="hl-5">playPrompt:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">, </span><span class="hl-6">// optional</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<hr>
<a id="md:call-management-using-javascript" class="tsd-anchor"></a><h1><a href="#md:call-management-using-javascript">Call management using JavaScript</a></h1><p>If you are integrating with a CRM or ERP system, use of the JavaScript SDK is highly recommended. Following is an
example of a call management integration that includes monitoring of incoming calls and performing of RingOuts.</p>
<p>A call management integration usually consists of the following tasks:</p>
<ol>
<li>Track the telephony status</li>
<li>View the list of active calls</li>
<li>View the recent calls</li>
</ol>
<a id="md:track-the-telephony-status" class="tsd-anchor"></a><h2><a href="#md:track-the-telephony-status">Track the telephony status</a></h2><p>First, you need to load the initial Presence status (you can use Underscore or Lodash to simplify things):</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">accountPresence</span><span class="hl-1"> = {};</span><br/><br/><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">_</span><span class="hl-1">.</span><span class="hl-0">extend</span><span class="hl-1">(</span><span class="hl-5">accountPresence</span><span class="hl-1">, </span><span class="hl-5">data</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Load Presence Error: &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>In the meantime, you can also set up Subscriptions (you can use Underscore or Lodash to simplify things):</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">subscription</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">createSubscription</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-0">addEvents</span><span class="hl-1">([</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true&#39;</span><span class="hl-1">]);</span><br/><br/><span class="hl-5">subscription</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-5">subscription</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">notification</span><span class="hl-1">, </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">msg</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">_</span><span class="hl-1">.</span><span class="hl-0">extend</span><span class="hl-1">(</span><span class="hl-5">accountPresence</span><span class="hl-1">, </span><span class="hl-5">msg</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">subscription</span><br/><span class="hl-1">    .</span><span class="hl-0">register</span><span class="hl-1">()</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Success: Subscription is listening&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Subscription Error: &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">subscription</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:view-the-list-of-active-calls" class="tsd-anchor"></a><h2><a href="#md:view-the-list-of-active-calls">View the list of active calls</a></h2><pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/active-calls&#39;</span><span class="hl-1">, {</span><span class="hl-5">query:</span><span class="hl-1"> {</span><span class="hl-5">page:</span><span class="hl-1"> </span><span class="hl-14">1</span><span class="hl-1">, </span><span class="hl-5">perPage:</span><span class="hl-1"> </span><span class="hl-14">10</span><span class="hl-1">}})</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">activeCalls</span><span class="hl-1"> = </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">records</span><span class="hl-1">;</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Active Calls Error: &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<a id="md:view-the-list-of-recent-calls" class="tsd-anchor"></a><h2><a href="#md:view-the-list-of-recent-calls">View the list of recent calls</a></h2><pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/call-log&#39;</span><span class="hl-1">, {</span><span class="hl-5">query:</span><span class="hl-1"> {</span><span class="hl-5">page:</span><span class="hl-1"> </span><span class="hl-14">1</span><span class="hl-1">, </span><span class="hl-5">perPage:</span><span class="hl-1"> </span><span class="hl-14">10</span><span class="hl-1">}})</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">calls</span><span class="hl-1"> = </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">records</span><span class="hl-1">;</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Recent Calls Error: &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>By default, the load request returns calls that were made during the last week. To alter the time frame, provide custom
<code>query.dateTo</code> and <code>query.dateFrom</code> properties.</p>
<a id="md:sms" class="tsd-anchor"></a><h1><a href="#md:sms">SMS</a></h1><p>In order to send an SMS using the API, simply make a POST request to <code>/account/~/extension/~/sms</code>:</p>
<pre><code class="language-js"><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/sms&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">        </span><span class="hl-5">from:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;+12223334444&#39;</span><span class="hl-1">}, </span><span class="hl-6">// Your sms-enabled phone number</span><br/><span class="hl-1">        </span><span class="hl-5">to:</span><span class="hl-1"> [</span><br/><span class="hl-1">            {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;+15556667777&#39;</span><span class="hl-1">}, </span><span class="hl-6">// Second party&#39;s phone number</span><br/><span class="hl-1">        ],</span><br/><span class="hl-1">        </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;Message content&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">json</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Success: &#39;</span><span class="hl-1"> + </span><span class="hl-5">json</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;Error: &#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<a id="md:fax" class="tsd-anchor"></a><h1><a href="#md:fax">Fax</a></h1><p>Fax endpoint understands <code>multipart/form-data</code> requests. First part must always be JSON-encoded information about the
fax. Other parts should have <code>filename</code> defined in order to be correctly presented in Service Web.</p>
<a id="md:browser" class="tsd-anchor"></a><h2><a href="#md:browser">Browser</a></h2><p>Modern browsers have <code>FormData</code> class which could be used for sending faxes.</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">body</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-5">to:</span><span class="hl-1"> [{</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">}], </span><span class="hl-6">// see all available options on Developer Portal</span><br/><span class="hl-1">        </span><span class="hl-5">faxResolution:</span><span class="hl-1"> </span><span class="hl-2">&#39;High&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">formData</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">FormData</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// This is the mandatory part, the name and type should always be as follows</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">, </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">File</span><span class="hl-1">([</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-5">body</span><span class="hl-1">)], </span><span class="hl-2">&#39;request.json&#39;</span><span class="hl-1">, {</span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;application/json&#39;</span><span class="hl-1">}));</span><br/><br/><span class="hl-6">// Find the input[type=file] field on the page</span><br/><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">fileField</span><span class="hl-1"> = </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;input-type-file-field&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Iterate through all currently selected files</span><br/><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-14">0</span><span class="hl-1">, </span><span class="hl-5">file</span><span class="hl-1">; (</span><span class="hl-5">file</span><span class="hl-1"> = </span><span class="hl-5">fileField</span><span class="hl-1">.</span><span class="hl-5">files</span><span class="hl-1">[</span><span class="hl-5">i</span><span class="hl-1">]); ++</span><span class="hl-5">i</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;attachment&#39;</span><span class="hl-1">, </span><span class="hl-5">file</span><span class="hl-1">); </span><span class="hl-6">// you can also use file.name instead of &#39;attachment&#39;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// To send a plain text</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;attachment&#39;</span><span class="hl-1">, </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">File</span><span class="hl-1">([</span><span class="hl-2">&#39;some plain text&#39;</span><span class="hl-1">], </span><span class="hl-2">&#39;text.txt&#39;</span><span class="hl-1">, {</span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;application/octet-stream&#39;</span><span class="hl-1">}));</span><br/><br/><span class="hl-6">// Send the fax</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/fax&#39;</span><span class="hl-1">, </span><span class="hl-5">formData</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:mms" class="tsd-anchor"></a><h1><a href="#md:mms">MMS</a></h1><p>As similar to the fax endpoint, <code>MMS</code> understands <code>multipart/form-data</code> requests. In order to send an MMS using the API, simply make a POST request to <code>/account/~/extension/~/sms</code>:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">body</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-5">from:</span><span class="hl-1"> {</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;+12223334444&#39;</span><span class="hl-1">}, </span><span class="hl-6">//// Your mms-enabled phone number</span><br/><span class="hl-1">        </span><span class="hl-5">to:</span><span class="hl-1"> [{</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">}], </span><span class="hl-6">// see all available options on Developer Portal</span><br/><span class="hl-1">        </span><span class="hl-5">faxResolution:</span><span class="hl-1"> </span><span class="hl-2">&#39;High&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">formData</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">FormData</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// This is the mandatory part, the name and type should always be as follows</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">, </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">File</span><span class="hl-1">([</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-5">body</span><span class="hl-1">)], </span><span class="hl-2">&#39;request.json&#39;</span><span class="hl-1">, {</span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;application/json&#39;</span><span class="hl-1">}));</span><br/><br/><span class="hl-6">// Find the input[type=file] field on the page</span><br/><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">fileField</span><span class="hl-1"> = </span><span class="hl-5">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;input-type-file-field&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Iterate through all currently selected files</span><br/><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-14">0</span><span class="hl-1">, </span><span class="hl-5">file</span><span class="hl-1">; (</span><span class="hl-5">file</span><span class="hl-1"> = </span><span class="hl-5">fileField</span><span class="hl-1">.</span><span class="hl-5">files</span><span class="hl-1">[</span><span class="hl-5">i</span><span class="hl-1">]); ++</span><span class="hl-5">i</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;attachment&#39;</span><span class="hl-1">, </span><span class="hl-5">file</span><span class="hl-1">); </span><span class="hl-6">// you can also use file.name instead of &#39;attachment&#39;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Send the mms</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/sms&#39;</span><span class="hl-1">, </span><span class="hl-5">formData</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:mms-enabled-phone-number" class="tsd-anchor"></a><h2><a href="#md:mms-enabled-phone-number">MMS-Enabled Phone Number</a></h2><p>In order to identify the MMS-Enabled phone numbers on an extension, simply make a GET request to <code>/account/~/extension/~/phone-number</code></p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">mmsEnabledNumbers</span><span class="hl-1"> = [];</span><br/><span class="hl-5">rcsdk</span><br/><span class="hl-1">    .</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/phone-number&#39;</span><span class="hl-1">, {</span><span class="hl-5">perPage:</span><span class="hl-1"> </span><span class="hl-2">&#39;max&#39;</span><span class="hl-1">})</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">response</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">phoneNumbers</span><span class="hl-1"> = </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">records</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-4">for</span><span class="hl-1"> (</span><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-14">0</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1"> &lt; </span><span class="hl-5">phoneNumbers</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">            </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">phoneNumbers</span><span class="hl-1">[</span><span class="hl-5">i</span><span class="hl-1">].</span><span class="hl-5">features</span><span class="hl-1">.</span><span class="hl-0">indexOf</span><span class="hl-1">(</span><span class="hl-2">&#39;MmsSender&#39;</span><span class="hl-1">) != -</span><span class="hl-14">1</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-5">mmsEnabledNumbers</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-5">phoneNumbers</span><span class="hl-1">[</span><span class="hl-5">i</span><span class="hl-1">].</span><span class="hl-5">phoneNumber</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">alert</span><span class="hl-1">(</span><span class="hl-2">&#39;MMS Enabled Phone Number Population Error:</span><span class="hl-15">\n\n</span><span class="hl-2">&#39;</span><span class="hl-1"> + </span><span class="hl-5">e</span><span class="hl-1">.</span><span class="hl-5">message</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>Further reading:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData">FormData</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/File">File</a></li>
</ul>
<a id="md:nodejs" class="tsd-anchor"></a><h2><a href="#md:nodejs">NodeJS</a></h2><p>SDK is capable of sending <code>FormData</code> objects created by <a href="https://github.com/form-data/form-data">form-data</a> module.</p>
<p>First, you will need to install it:</p>
<pre><code class="language-sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">form-data</span>
</code><button>Copy</button></pre>
<p>Then you can build your fax, but keep in mind that FormData API in NodeJS is slightly different from the browser:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">FormData</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;form-data&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-5">body</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-5">to:</span><span class="hl-1"> [{</span><span class="hl-5">phoneNumber:</span><span class="hl-1"> </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">}], </span><span class="hl-6">// see all available options on Developer Portal</span><br/><span class="hl-1">        </span><span class="hl-5">faxResolution:</span><span class="hl-1"> </span><span class="hl-2">&#39;High&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">formData</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">FormData</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// This is the mandatory part, the name and type should always be as follows</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">, </span><span class="hl-0">Buffer</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-5">body</span><span class="hl-1">)), {</span><span class="hl-5">filename:</span><span class="hl-1"> </span><span class="hl-2">&#39;request.json&#39;</span><span class="hl-1">, </span><span class="hl-5">contentType:</span><span class="hl-1"> </span><span class="hl-2">&#39;application/json&#39;</span><span class="hl-1">});</span><br/><br/><span class="hl-6">// To send a plain text</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;attachment&#39;</span><span class="hl-1">, </span><span class="hl-0">Buffer</span><span class="hl-1">(</span><span class="hl-2">&#39;some plain text&#39;</span><span class="hl-1">), {</span><span class="hl-5">filename:</span><span class="hl-1"> </span><span class="hl-2">&#39;text.txt&#39;</span><span class="hl-1">, </span><span class="hl-5">contentType:</span><span class="hl-1"> </span><span class="hl-2">&#39;text/plain&#39;</span><span class="hl-1">});</span><br/><br/><span class="hl-6">// To send a file from file system</span><br/><span class="hl-5">formData</span><span class="hl-1">.</span><span class="hl-0">append</span><span class="hl-1">(</span><span class="hl-2">&#39;attachment&#39;</span><span class="hl-1">, </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;fs&#39;</span><span class="hl-1">).</span><span class="hl-0">createReadStream</span><span class="hl-1">(</span><span class="hl-2">&#39;/foo/bar.jpg&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-6">// Send the fax</span><br/><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;/restapi/v1.0/account/~/extension/~/fax&#39;</span><span class="hl-1">, </span><span class="hl-5">formData</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>Further reading:</p>
<ul>
<li><a href="https://github.com/form-data/form-data#usage">form-data</a></li>
</ul>
<hr>
<a id="md:page-visibility" class="tsd-anchor"></a><h1><a href="#md:page-visibility">Page visibility</a></h1><p>You can use any of the libraries that work with the <a href="http://www.w3.org/TR/page-visibility/">Page Visibility API</a>,
such as <a href="https://github.com/ai/visibilityjs">visibility.js</a>.</p>
<p>This allows tracking the visibility of the page/tab/window/frame so that the application can react accordingly.
Following are some actions that the application may wish to take whenever it becomes visible:</p>
<ul>
<li>Check authentication</li>
<li>Reload/resync time-sensitive information from the server</li>
<li>Send heartbeats to the server</li>
</ul>
<p>Another usage is to reduce the number of Call Log or Messages reloads when the application is not visible. The SDK does
not require that any such optimizations be implemented in the application, but it is considered good practice.</p>
<hr>
<a id="md:tracking-network-requests-and-responses" class="tsd-anchor"></a><h1><a href="#md:tracking-network-requests-and-responses">Tracking network Requests And Responses</a></h1><p>You can set up tracking for all network requests (for instance, to log them somewhere) by obtaining a <code>Client</code> object
and registering observers on its various events:</p>
<pre><code class="language-js"><span class="hl-3">var</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-5">rcsdk</span><span class="hl-1">.</span><span class="hl-0">client</span><span class="hl-1">();</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">beforeRequest</span><span class="hl-1">, </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">apiResponse</span><span class="hl-1">) {}); </span><span class="hl-6">// apiResponse does not have response at this point</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">requestSuccess</span><span class="hl-1">, </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">apiResponse</span><span class="hl-1">) {});</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">requestError</span><span class="hl-1">, </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-5">apiError</span><span class="hl-1">) {});</span>
</code><button>Copy</button></pre>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:table-of-contents"><span>Table of contents</span></a><a href="#md:installation"><span>Installation</span></a><ul><li><a href="#md:set-things-up-in-nodejs"><span>Set things up in <wbr/>NodeJS</span></a></li><li><a href="#md:set-things-up-for-browserify-or-webpack"><span>Set things up for <wbr/>Browserify or <wbr/>Webpack</span></a></li><li><a href="#md:set-things-up-in-browser"><span>Set things up in <wbr/>Browser</span></a></li><li><ul><li><a href="#md:get-the-code"><span>Get the code</span></a></li><li><a href="#md:add-scripts-to-html-page-if-you-are-not-using-any-module-loaders"><span>Add scripts to HTML page (if you are not using any module loaders)</span></a></li><li><a href="#md:if-you-use-requirejs-in-your-project"><span>If you use <wbr/>RequireJS in your project</span></a></li></ul></li></ul><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a><ul><li><a href="#md:login"><span>Login</span></a></li><li><ul><li><a href="#md:3-legged-oauth-20-flows"><span>3-<wbr/>legged OAuth 2.0 <wbr/>Flows</span></a></li><li><ul><li><a href="#md:top-frame-setup"><span>Top <wbr/>Frame <wbr/>Setup</span></a></li><li><a href="#md:top-frame-with-pkce-setup"><span>Top <wbr/>Frame with PKCE <wbr/>Setup</span></a></li><li><a href="#md:popup-setup"><span>Popup <wbr/>Setup</span></a></li><li><a href="#md:difference-between-authorization-code-and-implicit-grant-flows"><span>Difference between <wbr/>Authorization <wbr/>Code and <wbr/>Implicit <wbr/>Grant flows</span></a></li></ul></li><li><a href="#md:password-flow"><span>Password <wbr/>Flow</span></a></li><li><a href="#md:multi-user-login"><span>Multi <wbr/>User <wbr/>Login</span></a></li></ul></li><li><a href="#md:handling-login-success"><span>Handling login success</span></a></li><li><a href="#md:handling-login-failure"><span>Handling login failure</span></a></li><li><a href="#md:checking-login-state"><span>Checking login state</span></a></li><li><a href="#md:retrieving-and-setting-auth-information"><span>Retrieving and setting auth information</span></a></li><li><a href="#md:logout"><span>Logout</span></a></li><li><a href="#md:events"><span>Events</span></a></li></ul><a href="#md:api-calls"><span>API calls</span></a><ul><li><a href="#md:http-verb-shorthands"><span>HTTP <wbr/>Verb shorthands</span></a></li><li><a href="#md:available-api-response-methods"><span>Available API response methods</span></a></li><li><a href="#md:binary-downloads"><span>Binary downloads</span></a></li><li><ul><li><a href="#md:on-nodejs"><span>On <wbr/>NodeJS</span></a></li><li><a href="#md:in-browser"><span>In browser</span></a></li><li><a href="#md:generic"><span>Generic</span></a></li></ul></li><li><a href="#md:rate-limiting"><span>Rate <wbr/>Limiting</span></a></li></ul><a href="#md:advanced-sdk-configuration-amp-polyfills"><span>Advanced SDK <wbr/>Configuration &amp; <wbr/>Polyfills</span></a><a href="#md:making-telephony-calls"><span>Making telephony calls</span></a><a href="#md:call-management-using-javascript"><span>Call management using <wbr/>Java<wbr/>Script</span></a><ul><li><a href="#md:track-the-telephony-status"><span>Track the telephony status</span></a></li><li><a href="#md:view-the-list-of-active-calls"><span>View the list of active calls</span></a></li><li><a href="#md:view-the-list-of-recent-calls"><span>View the list of recent calls</span></a></li></ul><a href="#md:sms"><span>SMS</span></a><a href="#md:fax"><span>Fax</span></a><ul><li><a href="#md:browser"><span>Browser</span></a></li></ul><a href="#md:mms"><span>MMS</span></a><ul><li><a href="#md:mms-enabled-phone-number"><span>MMS-<wbr/>Enabled <wbr/>Phone <wbr/>Number</span></a></li><li><a href="#md:nodejs"><span>NodeJS</span></a></li></ul><a href="#md:page-visibility"><span>Page visibility</span></a><a href="#md:tracking-network-requests-and-responses"><span>Tracking network <wbr/>Requests <wbr/>And <wbr/>Responses</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@ringcentral/sdk</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>