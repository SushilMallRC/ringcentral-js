{"version":3,"file":"ringcentral-subscriptions-deprecated.js","mappings":"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","sources":["webpack://RingCentral.SubscriptionsDeprecated/webpack/universalModuleDefinition","webpack://RingCentral.SubscriptionsDeprecated/./src/Subscriptions.ts","webpack://RingCentral.SubscriptionsDeprecated/./src/subscription/CachedSubscription.ts","webpack://RingCentral.SubscriptionsDeprecated/./src/subscription/Subscription.ts","webpack://RingCentral.SubscriptionsDeprecated/external umd {\"commonjs\":\"@ringcentral/sdk\",\"commonjs2\":\"@ringcentral/sdk\",\"amd\":\"ringcentral\",\"root\":\"RingCentral\"}","webpack://RingCentral.SubscriptionsDeprecated/external umd {\"commonjs\":\"pubnub\",\"commonjs2\":\"pubnub\",\"amd\":\"pubnub\",\"root\":\"PubNub\"}","webpack://RingCentral.SubscriptionsDeprecated/webpack/bootstrap","webpack://RingCentral.SubscriptionsDeprecated/webpack/before-startup","webpack://RingCentral.SubscriptionsDeprecated/webpack/startup","webpack://RingCentral.SubscriptionsDeprecated/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@ringcentral/sdk\"), require(\"pubnub\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"ringcentral\", \"pubnub\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RingCentral\"] = factory(require(\"@ringcentral/sdk\"), require(\"pubnub\"));\n\telse\n\t\troot[\"RingCentral\"] = root[\"RingCentral\"] || {}, root[\"RingCentral\"][\"SubscriptionsDeprecated\"] = factory(root[\"RingCentral\"], root[\"PubNub\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__180__, __WEBPACK_EXTERNAL_MODULE__10__) => {\nreturn ","import PubNubDefault from 'pubnub';\nimport {SDK} from '@ringcentral/sdk';\nimport Subscription, {SubscriptionOptions} from './subscription/Subscription';\nimport CachedSubscription, {CachedSubscriptionOptions} from './subscription/CachedSubscription';\n\nexport {SubscriptionOptions, CachedSubscriptionOptions};\n\nexport class Subscriptions {\n    private _sdk: SDK;\n\n    private _PubNub: any; // typeof PubNub;\n\n    public constructor({sdk, PubNub = PubNubDefault}: SubscriptionsOptions) {\n        this._sdk = sdk;\n        this._PubNub = PubNub;\n        // eslint-disable-next-line no-console\n        console.warn('PubNub support is deprecated. Please migrate your application to WebSockets.');\n    }\n\n    public createSubscription({pollInterval, renewHandicapMs}: SubscriptionOptions = {}) {\n        return new Subscription({\n            pollInterval,\n            renewHandicapMs,\n            sdk: this._sdk,\n            PubNub: this._PubNub,\n        });\n    }\n\n    public createCachedSubscription({cacheKey, pollInterval, renewHandicapMs}: CachedSubscriptionOptions) {\n        return new CachedSubscription({\n            cacheKey,\n            pollInterval,\n            renewHandicapMs,\n            sdk: this._sdk,\n            PubNub: this._PubNub,\n        });\n    }\n\n    public getPubNub() {\n        return this._PubNub;\n    }\n}\n\nexport interface SubscriptionsOptions {\n    sdk: SDK;\n    PubNub?: typeof PubNubDefault;\n}\n\nexport default Subscriptions;\n","import Subscription, {SubscriptionOptions, SubscriptionOptionsConstructor} from './Subscription';\n\nexport default class CachedSubscription extends Subscription {\n    protected _cacheKey: string;\n\n    public constructor({sdk, PubNub, cacheKey, pollInterval, renewHandicapMs}: CachedSubscriptionOptionsConstructor) {\n        super({sdk, PubNub, pollInterval, renewHandicapMs});\n\n        if (!cacheKey) {throw new Error('Cached Subscription requires cacheKey parameter to be defined');}\n\n        this._cacheKey = cacheKey;\n    }\n\n    public subscription() {\n        return this._sdk.cache().getItemSync(this._cacheKey) || {};\n    }\n\n    protected _setSubscription(subscription) {\n        this._sdk.cache().setItemSync(this._cacheKey, subscription);\n        return this;\n    }\n\n    /**\n     * This function checks whether there are any pre-defined eventFilters in cache and if not -- uses provided as defaults\n     */\n    public restore(events: string[]) {\n        if (!this.eventFilters().length) {\n            this.setEventFilters(events);\n        }\n\n        return this;\n    }\n}\n\nexport interface CachedSubscriptionOptions extends SubscriptionOptions {\n    cacheKey: string;\n}\n\nexport interface CachedSubscriptionOptionsConstructor\n    extends SubscriptionOptionsConstructor,\n        CachedSubscriptionOptions {}\n","import PubNubDefault from 'pubnub';\n\nimport {\n    ApiError,\n    SDK,\n} from '@ringcentral/sdk';\n\n// detect ISO 8601 format string with +00[:00] timezone notations\nconst ISO_REG_EXP = /(\\+[\\d]{2}):?([\\d]{2})?$/;\n\nconst buildIEFriendlyString = (match, $1, $2) => `${$1}:${$2 || '00'}`;\n\nconst parseISOString = (time: string | number) => {\n    time = time || 0;\n    if (typeof time === 'string') {\n        return Date.parse(time.replace(ISO_REG_EXP, buildIEFriendlyString));\n    }\n    return time;\n};\n\ndeclare class ActualPubNub extends PubNubDefault {\n    public removeAllListeners: any;\n\n    public decrypt: any;\n}\n\nexport enum events {\n    notification = 'notification',\n    removeSuccess = 'removeSuccess',\n    removeError = 'removeError',\n    renewSuccess = 'renewSuccess',\n    renewError = 'renewError',\n    subscribeSuccess = 'subscribeSuccess',\n    subscribeError = 'subscribeError',\n    automaticRenewSuccess = 'automaticRenewSuccess',\n    automaticRenewError = 'automaticRenewError',\n}\n\nexport default class Subscription extends SDK.EventEmitter {\n    public events = events;\n\n    protected _sdk: SDK;\n\n    protected _PubNub: typeof ActualPubNub;\n\n    protected _pollInterval: number;\n\n    protected _renewHandicapMs: number;\n\n    protected _pubnub: ActualPubNub = null;\n\n    protected _pubnubLastChannel: string = null;\n\n    protected _pubnubLastSubscribeKey: string = null;\n\n    protected _timeout: any = null;\n\n    protected _subscription: SubscriptionData = null;\n\n    protected _automaticRenewPromise: Promise<void> = null;\n\n    public constructor({\n        sdk,\n        PubNub,\n        pollInterval = 10 * 1000,\n        renewHandicapMs = 2 * 60 * 1000,\n    }: SubscriptionOptionsConstructor) {\n        super();\n\n        this._sdk = sdk;\n        this._PubNub = PubNub;\n        this._pollInterval = pollInterval;\n        this._renewHandicapMs = renewHandicapMs;\n    }\n\n    public on(event: events.notification, listener: (body: any) => void);\n    public on(event: events.removeSuccess, listener: (response: Response) => void);\n    public on(event: events.removeError, listener: (error: ApiError | Error) => void);\n    public on(event: events.renewSuccess, listener: (response: Response) => void);\n    public on(event: events.renewError, listener: (error: ApiError | Error) => void);\n    public on(event: events.automaticRenewSuccess, listener: (response: Response) => void);\n    public on(event: events.automaticRenewError, listener: (error: ApiError | Error) => void);\n    public on(event: events.subscribeSuccess, listener: (response: Response) => void);\n    public on(event: events.subscribeError, listener: (error: ApiError | Error) => void);\n    public on(event: string, listener: (...args) => void) {\n        return super.on(event, listener);\n    }\n\n    public subscribed() {\n        const subscription = this.subscription();\n\n        return !!(\n            subscription.id &&\n            subscription.deliveryMode &&\n            subscription.deliveryMode.subscriberKey &&\n            subscription.deliveryMode.address\n        );\n    }\n\n    public alive() {\n        return this.subscribed() && Date.now() < this.expirationTime();\n    }\n\n    public expired() {\n        if (!this.subscribed()) {return true;}\n        return !this.subscribed() || Date.now() > parseISOString(this.subscription().expirationTime);\n    }\n\n    public expirationTime() {\n        return parseISOString(this.subscription().expirationTime) - this._renewHandicapMs;\n    }\n\n    public setSubscription(subscription: SubscriptionData) {\n        subscription = subscription || {};\n\n        this._clearTimeout();\n        this._setSubscription(subscription);\n        this._subscribeAtPubNub();\n        this._setTimeout();\n\n        return this;\n    }\n\n    public subscription() {\n        const _subscription = this._subscription || {};\n        return {..._subscription};\n    }\n\n    public pubnub() {\n        return this._pubnub;\n    }\n\n    /**\n     * Creates or updates subscription if there is an active one\n     */\n    public async register(): Promise<Response> {\n        if (this.alive()) {\n            return this.renew();\n        }\n        return this.subscribe();\n    }\n\n    public eventFilters() {\n        return this.subscription().eventFilters || [];\n    }\n\n    public addEventFilters(eventFilters: string[]) {\n        this.setEventFilters(this.eventFilters().concat(eventFilters));\n        return this;\n    }\n\n    /**\n     * @param {string[]} eventFilters\n     * @return {Subscription}\n     */\n    public setEventFilters(eventFilters) {\n        const subscription = this.subscription();\n        subscription.eventFilters = eventFilters;\n        this._setSubscription(subscription);\n        return this;\n    }\n\n    public async subscribe(): Promise<Response> {\n        try {\n            this._clearTimeout();\n\n            if (!this.eventFilters().length) {throw new Error('Events are undefined');}\n\n            const response = await this._sdk.platform().post('/restapi/v1.0/subscription', {\n                eventFilters: this._getFullEventFilters(),\n                deliveryMode: {\n                    transportType: 'PubNub',\n                },\n            });\n\n            const json = await response.json();\n\n            this.setSubscription(json).emit(this.events.subscribeSuccess, response);\n\n            return response;\n        } catch (e) {\n            // `reset` will remove pubnub instance.\n            // so if network is broken for a long time, pubnub will be removed. And client can not receive notification anymore.\n            this.reset().emit(this.events.subscribeError, e);\n\n            throw e;\n        }\n    }\n\n    public async renew(): Promise<Response> {\n        try {\n            this._clearTimeout();\n\n            if (!this.subscribed()) {throw new Error('No subscription');}\n\n            if (!this.eventFilters().length) {throw new Error('Events are undefined');}\n\n            const response = await this._sdk.platform().put(`/restapi/v1.0/subscription/${this.subscription().id}`, {\n                eventFilters: this._getFullEventFilters(),\n            });\n\n            const json = await response.json();\n\n            this.setSubscription(json).emit(this.events.renewSuccess, response);\n\n            return response;\n        } catch (e) {\n            // `reset` will remove pubnub instance.\n            // so if network is broken for a long time, pubnub will be removed. And client can not receive notification anymore.\n            this.reset().emit(this.events.renewError, e);\n\n            throw e;\n        }\n    }\n\n    public async remove(): Promise<Response> {\n        try {\n            if (!this.subscribed()) {throw new Error('No subscription');}\n\n            const response = await this._sdk.platform().delete(`/restapi/v1.0/subscription/${this.subscription().id}`);\n\n            this.reset().emit(this.events.removeSuccess, response);\n\n            return response;\n        } catch (e) {\n            this.emit(this.events.removeError, e);\n\n            throw e;\n        }\n    }\n\n    public resubscribe(): Promise<Response> {\n        const filters = this.eventFilters();\n        return this.reset()\n            .setEventFilters(filters)\n            .subscribe();\n    }\n\n    /**\n     * Remove subscription and disconnect from PubNub\n     * This method resets subscription at client side but backend is not notified\n     */\n    public reset() {\n        this._clearTimeout();\n        this._unsubscribeAtPubNub();\n        this._setSubscription(null);\n        return this;\n    }\n\n    /**\n     * @param subscription\n     * @private\n     */\n    protected _setSubscription(subscription: SubscriptionData) {\n        this._subscription = {\n            ...subscription,\n        };\n        return this;\n    }\n\n    /**\n     * @return {string[]}\n     * @private\n     */\n    public _getFullEventFilters() {\n        return this.eventFilters().map(event => this._sdk.platform().createUrl(event));\n    }\n\n    private async _automaticRenewHandler() {\n        try {\n            if (this.alive()) {return;}\n\n            this._clearTimeout();\n\n            const res = await (this.expired() ? this.subscribe() : this.renew());\n\n            this.emit(this.events.automaticRenewSuccess, res);\n        } catch (e) {\n            this.emit(this.events.automaticRenewError, e);\n        }\n    }\n\n    /**\n     * @return {Subscription}\n     * @private\n     */\n    public _setTimeout() {\n        this._clearTimeout();\n\n        if (!this.alive()) {throw new Error('Subscription is not alive');}\n\n        this._timeout = setInterval(async () => {\n            if (!this._automaticRenewPromise) {\n                this._automaticRenewPromise = this._automaticRenewHandler();\n            }\n            await this._automaticRenewPromise;\n            this._automaticRenewPromise = null;\n        }, this._pollInterval);\n\n        return this;\n    }\n\n    // check if app is automatic renewing\n    public automaticRenewing(): Promise<void> {\n        return this._automaticRenewPromise;\n    }\n\n    /**\n     * @return {Subscription}\n     * @private\n     */\n    public _clearTimeout() {\n        clearInterval(this._timeout);\n        return this;\n    }\n\n    public _decrypt(message) {\n        if (!this.subscribed()) {throw new Error('No subscription');}\n\n        if (this.subscription().deliveryMode.encryptionKey) {\n            //FIXME decrypt is not described in DTS\n            message = this._pubnub.decrypt(message, this.subscription().deliveryMode.encryptionKey, {\n                encryptKey: false,\n                keyEncoding: 'base64',\n                keyLength: 128,\n                mode: 'ecb',\n            });\n        }\n\n        return message;\n    }\n\n    private _notify(message) {\n        this.emit(this.events.notification, this._decrypt(message));\n        return this;\n    }\n\n    private _subscribeAtPubNub() {\n        if (!this.alive()) {throw new Error('Subscription is not alive');}\n\n        const {address, subscriberKey} = this.subscription().deliveryMode;\n\n        if (this._pubnub) {\n            if (this._pubnubLastChannel === address) {\n                // Nothing to update, keep listening to same channel\n                return this;\n            }\n            if (this._pubnubLastSubscribeKey && this._pubnubLastSubscribeKey !== subscriberKey) {\n                // Subscribe key changed, need to reset everything\n                this._unsubscribeAtPubNub();\n            } else if (this._pubnubLastChannel) {\n                // Need to subscribe to new channel\n                this._pubnub.unsubscribeAll();\n            }\n        }\n\n        if (!this._pubnub) {\n            this._pubnubLastSubscribeKey = subscriberKey;\n\n            const PubNub: any = this._PubNub;\n\n            this._pubnub = new PubNub({\n                ssl: true,\n                restore: true,\n                subscribeKey: subscriberKey,\n                useRandomIVs: false,\n            });\n\n            this._pubnub.addListener({\n                status: statusEvent => {},\n                message: m => this._notify(m.message),\n            });\n        }\n\n        this._pubnubLastChannel = address;\n        this._pubnub.subscribe({channels: [address]});\n\n        return this;\n    }\n\n    private _unsubscribeAtPubNub() {\n        if (!this.subscribed() || !this._pubnub) {return this;}\n\n        this._pubnub.unsubscribeAll();\n        this._pubnub.removeAllListeners();\n\n        this._pubnubLastSubscribeKey = null;\n        this._pubnubLastChannel = null;\n        this._pubnub = null;\n\n        return this;\n    }\n\n    // Allow to force rebuild pubnub connection\n    public async resubscribeAtPubNub(): Promise<Response> {\n        this._unsubscribeAtPubNub();\n        return this.register();\n    }\n}\n\nexport interface SubscriptionOptions {\n    pollInterval?: number;\n    renewHandicapMs?: number;\n}\n\nexport interface SubscriptionOptionsConstructor extends SubscriptionOptions {\n    sdk: SDK;\n    PubNub: typeof ActualPubNub;\n}\n\nexport interface DeliveryMode {\n    transportType?: string;\n    encryption?: string;\n    address?: string;\n    subscriberKey?: string;\n    encryptionKey?: string;\n    secretKey?: string;\n}\n\nexport interface SubscriptionData {\n    id?: string;\n    uri?: string;\n    eventFilters?: string[];\n    expirationTime?: string; // Format: 2014-03-12T19:54:35.613+0000\n    expiresIn?: number;\n    deliveryMode?: DeliveryMode;\n    creationTime?: string;\n    status?: string; //eslint-disable-line\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__180__;","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(702);\n",""],"names":[],"sourceRoot":""}